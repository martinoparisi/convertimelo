Firestore collections and example documents for Convertimelo

Collections:

1) users (one document per user, doc id = Firebase Auth UID)

Example document (path: users/{uid}):
{
  "username": "Marco",
  "theme": "dark", // or "light"
  "createdAt": { "_seconds": 1699999999, "_nanoseconds": 0 }
}

2) history (each doc is a conversion entry)

Document fields (path: history/{docId}):
{
  "userId": "<uid>",
  "type": "unit", // file|unit|currency|text|genkit
  "details": "{...}", // string or small JSON string with conversion input/result
  "timestamp": { "_seconds": 1699999999, "_nanoseconds": 0 }
}

Notes:
- For file conversions, only store the file name in `details` (not the file content).
- `details` should include: date/time (optional), operation details, and the result (avoid storing large blobs).

Security rules (simple example - put in `firestore.rules`):

rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Allow authenticated users to read/write their own profile
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }

    // Allow authenticated users to write their own history and read their own history
    match /history/{docId} {
      allow create: if request.auth != null && request.resource.data.userId == request.auth.uid;
      allow read: if request.auth != null && resource.data.userId == request.auth.uid;
      allow delete: if request.auth != null && resource.data.userId == request.auth.uid;
      // Prevent updates to userId
      allow update: if false;
    }

    // Deny everything else
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

Quick import / seed (via firebase CLI or Admin SDK):
- To create an example user doc and history entries, you can run a small Node script using the Admin SDK, or use the `Firestore` UI to create documents manually.

Simple curl + emulator example (if using Firestore emulator):
- Emulator REST API is available at http://localhost:8080
- Create a user document (replace <uid>):

curl -X POST "http://localhost:8080/v1/projects/convertimelo/databases/(default)/documents/users?documentId=<uid>" \
  -H "Content-Type: application/json" \
  -d '{ "fields": { "username": {"stringValue":"Marco"}, "theme": {"stringValue":"dark"}, "createdAt": {"timestampValue":"2025-01-01T00:00:00Z"} } }'

- Create a history entry:

curl -X POST "http://localhost:8080/v1/projects/convertimelo/databases/(default)/documents/history" \
  -H "Content-Type: application/json" \
  -d '{ "fields": { "userId": {"stringValue":"<uid>"}, "type": {"stringValue":"unit"}, "details": {"stringValue":"1 meter -> 3.2808 foot"}, "timestamp": {"timestampValue":"2025-01-01T12:00:00Z"} } }'


Instructions:
- Add the `firestore.rules` above to your Firebase project.
- Use the Firebase Console to inspect the collections after running the app.
- The project expects documents in `users/{uid}` and `history/{autoId}`.

If you want, I can also add a small Node script to seed example documents or integrate a Cloud Function to migrate localStorage entries to Firestore on login.